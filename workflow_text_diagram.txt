═══════════════════════════════════════════════════════════════════
          TradingAgents 工作流程图 (Workflow Diagram)
═══════════════════════════════════════════════════════════════════

[START]
    │
    ▼
┌─────────────────────────────────────────────────────────────┐
│  阶段 1: 分析师阶段 (Analyst Phase)                          │
│  ────────────────────────────────────────────────────────   │
│                                                               │
│  [Market Analyst] ──┐                                         │
│                     │ (需要数据?)                             │
│                     ▼                                         │
│              [tools_market] ──┐                               │
│                               │ (返回数据)                    │
│                               ▼                               │
│                        [Market Analyst]                       │
│                               │                               │
│                               ▼ (分析完成)                    │
│                        [Msg Clear Market]                     │
│                               │                               │
│                               ▼                               │
│  [Social Analyst] ──┐                                         │
│                     │ (需要数据?)                             │
│                     ▼                                         │
│              [tools_social] ──┐                               │
│                               │                               │
│                               ▼                               │
│                        [Social Analyst]                       │
│                               │                               │
│                               ▼                               │
│                        [Msg Clear Social]                     │
│                               │                               │
│                               ▼                               │
│  [News Analyst] ──┐                                           │
│                   │                                           │
│                   ▼                                           │
│            [tools_news] ──┐                                   │
│                           │                                   │
│                           ▼                                   │
│                    [News Analyst]                             │
│                           │                                   │
│                           ▼                                   │
│                    [Msg Clear News]                           │
│                           │                                   │
│                           ▼                                   │
│  [Fundamentals Analyst] ──┐                                   │
│                           │                                   │
│                           ▼                                   │
│                    [tools_fundamentals] ──┐                    │
│                                          │                    │
│                                          ▼                    │
│                                   [Fundamentals Analyst]      │
│                                          │                    │
│                                          ▼                    │
│                                   [Msg Clear Fundamentals]    │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│  阶段 2: 研究辩论阶段 (Research Debate Phase)               │
│  ────────────────────────────────────────────────────────   │
│                                                               │
│                    [Bull Researcher]                         │
│                         ↕ (循环辩论)                         │
│                    [Bear Researcher]                          │
│                         │                                     │
│                         ▼ (达到最大轮次)                      │
│                  [Research Manager]                           │
│                         │                                     │
│                         ▼                                     │
│                      [Trader]                                 │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│  阶段 3: 风险分析阶段 (Risk Analysis Phase)                 │
│  ────────────────────────────────────────────────────────   │
│                                                               │
│                    [Risky Analyst]                            │
│                         │                                     │
│                         ▼                                     │
│                    [Safe Analyst]                             │
│                         │                                     │
│                         ▼                                     │
│                  [Neutral Analyst]                            │
│                         │                                     │
│                         └───────┐                             │
│                                 │ (循环辩论)                  │
│                                 ▼                             │
│                          [Risky Analyst]                      │
│                                 │                             │
│                                 ▼ (达到最大轮次)              │
│                          [Risk Judge]                         │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
                            [END]

═══════════════════════════════════════════════════════════════════
关键说明:
═══════════════════════════════════════════════════════════════════

1. 分析师阶段:
   - 每个分析师可以调用工具获取数据 (tools_xxx)
   - 工具调用后会返回分析师节点继续分析
   - 分析完成后清理消息，进入下一个分析师

2. 研究辩论阶段:
   - Bull 和 Bear 研究员进行多轮辩论
   - 辩论轮次由 max_debate_rounds 控制
   - Research Manager 根据辩论结果做出投资判断

3. 风险分析阶段:
   - Risky → Safe → Neutral → Risky (循环)
   - 辩论轮次由 max_risk_discuss_rounds 控制
   - Risk Judge 做出最终风险决策

═══════════════════════════════════════════════════════════════════

